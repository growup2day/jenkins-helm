image:
  repository: "nzdd-jenkins-dev/jenkins-helm"

ssh:
    known_hosts: |
        nzdih00v.nz.unix.test,10.106.184.124 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBPyv2SHhwf+u5t4eXNiUqbs4A1zJVKuhsZsOfPuoDX9Eron5BDxOHg39/TBHZ3RbN5u84Uj5dd2BzQE/nGVScg0=
        nztih02v.nz.unix.test,10.106.215.96 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBPyv2SHhwf+u5t4eXNiUqbs4A1zJVKuhsZsOfPuoDX9Eron5BDxOHg39/TBHZ3RbN5u84Uj5dd2BzQE/nGVScg0=
        nztih00v.nz.unix.test,10.106.184.131 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBPyv2SHhwf+u5t4eXNiUqbs4A1zJVKuhsZsOfPuoDX9Eron5BDxOHg39/TBHZ3RbN5u84Uj5dd2BzQE/nGVScg0=
        nztih01v.nz.unix.test,10.106.215.97 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBPyv2SHhwf+u5t4eXNiUqbs4A1zJVKuhsZsOfPuoDX9Eron5BDxOHg39/TBHZ3RbN5u84Uj5dd2BzQE/nGVScg0=
        bitbucket.nz.service.anz,10.105.210.55 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBHipBy2SYqH6VyNsI/xUO/sL0z+r48QXXEzdY1c9qfXxqx/fdjtfkzwMO36jx7KtjmtpC0uR2IyI1DGxuO/3AWc=
        [bitbucket.nz.service.anz]:7998,[10.105.210.55]:7998 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCmlCvbpWCrhvBZUxUD1NGyA45WGjVKQ18RclWrqUdSwk+QBi/XKdgBSinXl4kYnU+gRSiVSeNuhmHIFCq5klpxluaCZg2ywwEMdgEbW0TnJgIajno+/Kpa7IM3KPewVxlajuE4CO+1WDRMEK0ws3gFvl9368/nyGe8cTKK8MtG2gVpQUUcp+3/N21LAMzikNWdBqyagE83G5TRijNEjAgnJwa/w+l6KO16h7g9fYcsxESYuEhDhcutVaOYQO3I18zM2gWEHOpACczIpN9D8Vb4ErOysRr2j5AoqKzNwHCf4W00m5BxdjiJhyC6wWJBp7p2/JqVT5rZNCf+EAD7D+o3

JCasC:
  envVars:
    "TDDevelopment": "nztddev.unix.anznb.co.nz"

  scriptApproval:
  - "method groovy.lang.GString getBytes"
  - "method hudson.model.Run getCause java.lang.Class"
  - "method java.net.HttpURLConnection setRequestMethod java.lang.String"
  - "method java.net.URL openConnection"
  - "method java.net.URLConnection getInputStream"
  - "method java.net.URLConnection setRequestProperty java.lang.String java.lang.String"
  - "method org.jenkinsci.plugins.workflow.support.steps.build.RunWrapper getRawBuild"
  - "staticMethod org.codehaus.groovy.runtime.DefaultGroovyMethods getProperties java.lang.Object"
  - "staticMethod org.codehaus.groovy.runtime.DefaultGroovyMethods getText java.io.InputStream"
  - "staticMethod org.codehaus.groovy.runtime.EncodingGroovyMethods encodeBase64 byte[]"
  - "method java.io.File exists"
  - "method java.io.File getName"
  - "method java.io.File getPath"
  - "method java.io.File isDirectory"
  - "method java.io.File lastModified"
  - "method java.io.File listFiles"
  - "new java.io.File java.lang.String"

  configScripts:
    jenkins-permissions: |
      jenkins:
        authorizationStrategy:
          projectMatrix:
            permissions:
            - "GROUP:Overall/Administer:Rg_Svc NZ Data Delivery - Jenkins Admins"
            - "GROUP:Overall/Read:Rg_Svc NZ Data Delivery - OpenShift Project View"
            - "USER:Overall/Read:anonymous"

    # Configures the views set on Jenkins Dashboard
    set-custom-views: |
      jenkins:
        views:
        - list:
            name: "DEV Pipeline"
            columns:
            {{- range .Values.nzdd.defaultColumns }}
            - "{{ . }}"
            {{- end }}
            description: "# DEV Pipelines"
            jobNames:
            - "NZDW - DEV Deployment pipeline"
            - "NZDW Provisioning Package - DEV Pipeline"
        - list:
            name: "TAF Tooling"
            columns:
            {{- range .Values.nzdd.defaultColumns }}
            - "{{ . }}"
            {{- end }}
            jobNames:
            - "DA_TEST_CORE_DEVELOPMENT_PIPELINE"
            - "DA_TEST_CORE_MASTER_BUILDER"
        - list:
            name: "Testing Suite"
            columns:
            {{- range .Values.nzdd.defaultColumns }}
            - "{{ . }}"
            {{- end }}
            description: "# Test Pipelines"
            jobNames:
            - "Testing Cloud - Dev Deployment"
            - "Testing Cloud - Dev pipeline"
            - "Testing Suite 1 - DEV Deployment Pipeline"
            - "Testing Suite 1 - DEV Pipeline"
            - "Testing Suite 2 - DEV Deployment Pipeline"
            - "Testing Suite 2 - DEV Pipeline"
            - "Testing Suite 3 - DEV Deployment Pipeline"
            - "Testing Suite 3 - DEV Pipeline"
            - "Testing Suite 4 - DEV Deployment Pipeline"
            - "Testing Suite 4 - DEV Pipeline"
        - list:
            name: "Manual Deployment"
            columns:
            {{- range .Values.nzdd.defaultColumns }}
            - "{{ . }}"
            {{- end }}
            jobNames:
            - "Alternative Deployment Pipeline"

    header-theme: |
      appearance:
        customHeader:
          enabled: true
          header: "logo"
          headerColor:
            backgroundColor: "{{ .Values.nzdd.header.backgroundColour }}"
            color: "{{ .Values.nzdd.header.textColour }}"
            hoverColor: "{{ .Values.nzdd.header.hoverColour }}"
          logo:
            symbol:
              symbol: "symbol-jenkins"
          logoText: "{{ .Values.nzdd.header.logoText }}"
          thinHeader: false
          title: "{{ .Values.nzdd.header.titleText }}"

    ms-teams-connector: |
      unclassified:
          webhook:
            globalName: "{{ .Values.nzdd.msTeams.displayName }}"
            globalUrl: "{{ .Values.nzdd.msTeams.webhook }}"

    database-plugin: |
      unclassified:
        globalDatabaseConfiguration:
          database:
            generic:
              driver: "{{ .Values.nzdd.databasePlugin.driver }}"
              url: "{{ .Values.nzdd.databasePlugin.url }}"
              username: "{{ .Values.nzdd.databasePlugin.username }}"
              password: "{{ .Values.nzdd.databasePlugin.password }}"

    disable-admin-monitors: |
        jenkins:
          disabledAdministrativeMonitors:
          - "jenkins.security.csrf.CSRFAdministrativeMonitor"
          - "org.jenkinsci.plugins.matrixauth.AmbiguityMonitor"
          - "hudson.model.UpdateCenter$CoreUpdateMonitor"
          - "hudson.diagnosis.TooManyJobsButNoView"
          - "jenkins.model.BuiltInNodeMigration"
          - "jenkins.security.QueueItemAuthenticatorMonitor"
          - "hudson.PluginManager$PluginDeprecationMonitor"
          - "jenkins.security.ResourceDomainRecommendation"
          - "jenkins.diagnostics.ControllerExecutorsAgents"
          - "jenkins.security.s2m.MasterKillSwitchWarning"

    lockable-resources: |
      unclassified:
        lockableResourcesManager:
          declaredResources:
            - description: Lock Deployment and Test Stages to avoid contention when concurrent pipelines are running
              labels: LockA
              name: LockA
            - name: lock-configbuilder
            - name: lock-processingtags
            - name: DEV10-refresh
            - description: Lock Deployment and testing stages so they cannot run concurrently
              labels: Build
              name: Build
            - description: Lock Deployment and testing stages so they cannot run concurrently only for dev pipeline
              labels: Buildcycle1
              name: Buildcycle1
            - name: ITG-refresh
            - name: ST-refresh

    # Configure the default shell binary.
    set-bash-shell: |
      unclassified:
        shell:
          shell: /usr/bin/bash

    # Configure build concurrency settings.
    set-build-concurrency: |
      unclassified:
          throttleJobProperty:
            categories:
            - categoryName: "ThrottleA"
              maxConcurrentPerNode: 0
              maxConcurrentTotal: 7

    # Select Markdown as the default format for text fields in the UI.
    set-markup-formatter: |
      jenkins:
        markupFormatter: "markdownFormatter"
        # Could also use SafeHTML instead if required.
        # markupFormatter:
        #   rawHtml:
        #     disableSyntaxHighlighting: false
        # Or just plain text (default)
        # markupFormatter: "plainText"

    # Configure the folder health metrics plugin.
    bubble-up-child-health-metrics: |
      unclassified:
        defaultFolderConfiguration:
          healthMetrics:
          - worstChildHealthMetric:
              recursive: true